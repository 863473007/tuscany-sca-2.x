<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Tuscany Extensions</title>

<script type="text/javascript" src="/dojo/dojo.js"></script>

<style type="text/css">
body,html {
	font-family: helvetica, arial, sans-serif;
	font-size: 90%;
}
</style>


</head>

<body>

<div id="bodydiv" style="position: absolute; top: 0px; left: 0px; right: 0px;">

<div style="position:absolute; top: 40px; left: 240px; right: 0px; height: 5000px;">
<iframe id="dataFrame" class="databg" style="position: relative; height: 5000px; width: 100%; border: 0px;" scrolling="no" frameborder="0"></iframe>
</div>

</div>




<script type="text/javascript">
    dojo.require("dojox.xml.parser");
    dojo.require("tuscany.RestService");
    dojo.require("tuscany.Composite");

    var composite;

    function composite_getResponse(xmlResponse, exception) {
    	if(exception){
			alert(exception.message);
			return;
		}
    	
    	composite = tuscany.Composite(xmlResponse);
    	alert(composite.components())

    	/*
    	 var itemTags = xmlResponse.getElementsByTagName ("component");
         for (i = 0; i < itemTags.length; i++) {
        	 var attributes = itemTags[i].attributes;
        	 alert(attributes[0].name);
             var recordNode = itemTags[i].getElementsByTagName ("name")[0];
             if (recordNode.textContent != undefined) {
                 alert(recordNode.textContent);
             }
             else {
                 alert(recordNode.text);
             }
         }
         */

         compositeXML = dojox.xml.parser.innerXML(xmlResponse);


    	alert(compositeXML);

    }


    var restClient = new tuscany.RestService("http://localhost:8080/domain","text/plain");
	restClient.get("default").addCallback(composite_getResponse);

    // Create editor graph area
    var g = graph.mkgraph(graph.mkpath().move(0,40), 'Domain', 'propValue');
    var bg = graph.mkgroup(graph.mkpath());

	graph.edit(name, composite, graph.composite('domain', graph.mkpath().move(palcx,0)), oncomposchange, oncompselect, g);
	//graph.composite('domain', graph.mkpath().move(palcx,0));



</script>
</body>

</html>